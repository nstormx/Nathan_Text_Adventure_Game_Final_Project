#Nathan Christensen-Padilla
#Final Project
#Text Adventure Game - The Grand Zyelow Dungeon.
#In this game you input your name and the class you wish to be from a list of choices,
#then you go through the dungeon until you reach the end, or run into something that
#end's your journey early.

import random

#Rooms of the Dungeon

def startroom(abilities, hp):
    print("Start Room")

    print("You take a moment to gather yourself before diving head first into")
    print("the dungeon, as you enter you feel a bit of uneasiness in the air.")
    print("Almost as if there's something sinister hiding in here.")
    room1("Cleared: ", abilities, hp)


def room1(roomclear, abilities, hp):
    print("\nRoom 1")

    if "r1." in roomclear:
        print("You have already cleared this room.")
    else:
        roomclear = roomclear + "r1."

    while True:
        path = input("Choose which way to go.\n(Forward or Left.)\n")
        path = path.lower().rstrip()
        if path == "forward":
            room4(roomclear, abilities, hp)
        elif path == "left":
            room2(roomclear, abilities, hp)
        else:
            print("Invalid input.\n")

def room2(roomclear, abilities, hp):
    print("\nRoom 2")

    if "r2." in roomclear:
        print("You have already cleared this room.")
    else:
        roomclear = roomclear + "r2."

    hp = fight(abilities,hp)

    while True:
        path = input("Choose which way to go.\n(Forward, Left or Right.)\n")
        path = path.lower().rstrip()
        if path == "forward":
            room5(roomclear, abilities, hp)
        elif path == "left":
            room3(roomclear, abilities, hp)
        elif path == "right":
            room1(roomclear, abilities, hp)
        else:
            print("Invalid input.\n")

def room3(roomclear, abilities, hp):
    print("\nRoom 3")

    if "r3." in roomclear:
        print("You have already cleared this room.")
    else:
        roomclear = roomclear + "r3."

    while True:
        path = input("Choose which way to go.\n(Forward or Right.)\n")
        path = path.lower().rstrip()
        if path == "forward":
            room6(roomclear, abilities, hp)
        elif path == "right":
            room2(roomclear, abilities, hp)
        else:
            print("Invalid input.\n")

def room4(roomclear, abilities, hp):
    print("\nRoom 4")

    if "r4." in roomclear:
        print("You have already cleared this room.")
    else:
        roomclear = roomclear + "r4."

    while True:
        path = input("Choose which way to go.\n(Forward, Back or Left.)\n")
        path = path.lower().rstrip()
        if path == "forward":
            room7(roomclear, abilities, hp)
        elif path == "back":
            room1(roomclear, abilities, hp)
        elif path == "left":
            room5(roomclear, abilities, hp)
        else:
            print("Invalid input.\n")

def room5(roomclear, abilities, hp):
    print("\nRoom 5")

    if "r5." in roomclear:
        print("You have already cleared this room.")
    else:
        roomclear = roomclear + "r5."

    while True:
        path = input("Choose which way to go.\n(Forward, Back, Left or Right.)\n")
        path = path.lower().rstrip()
        if path == "forward":
            room8(abilities, hp)
        elif path == "back":
            room2(roomclear, abilities, hp)
        elif path == "left":
            room6(roomclear, abilities, hp)
        elif path == "right":
            room4(roomclear, abilities, hp)
        else:
            print("Invalid input.\n")

def room6(roomclear, abilities, hp):
    print("\nRoom 6")

    if "r6." in roomclear:
        print("You have already cleared this room.")
    else:
        roomclear = roomclear + "r6."

    while True:
        path = input("Choose which way to go.\n(Forward, Right or Back.)\n")
        path = path.lower().rstrip()
        if path == "forward":
            room9()
        elif path == "back":
            room3(roomclear, abilities, hp)
        elif path == "right":
            room5(roomclear, abilities, hp)
        else:
            print("Invalid input.\n")

def room7(roomclear, abilities, hp):
    print("\nRoom 7")

    if "r7." in roomclear:
        print("You have already cleared this room.")
    else:
        roomclear = roomclear + "r7."

    hp = fight(abilities,hp)

    while True:
        path = input("Choose which way to go.\n(Back or Left.)\n")
        path = path.lower().rstrip()
        if path == "back":
            room4(roomclear, abilities, hp)
        elif path == "left":
            room8()
        else:
            print("Invalid input.\n")

def room8(abilities, hp):
    print("\nRoom 8")

    print("It's time to enter through the giant door and see what lies on the other side.\n")
    bossroom(abilities, hp)

def room9():
    print("\nRoom 9")

    print("You enter through the mysterious door and get teleported out of the dungeon unable")
    print("to remember anything about where it's located. You decide to return home.")
    room9end()

def bossroom(abilities, hp):
    print("\nBossroom")

    print("The boss Gil-Snax the Unstoppable has been slain!")
    bossend()



#Ending's
def bossend():
    print("\nEnding words and stuff.")
    input("Press enter to close the program.")
    exit()

def room9end():
    print("\nEnding words and stuff.")
    input("Press enter to close the program.")
    exit()


#Fighting
def fight(abilities,hp):
    dmg = 0
    enemy1 = list(("Bat", 10, 1))
    enemy2 = list(("Skeleton", 15, 2))
    enemy3 = list(("Ghoul", 15, 3))
    enemylist = list((enemy1,enemy2,enemy3))
    enemy = enemylist[random.randint(0,2)]
    print("The enemy is a", enemy[0], "and you ready your weapon to strike.\n")

    while enemy[1] > 0:
        print(abilities)
        choice = input("Pick a ability to use. (1-3)\n")
        if choice == "1" or "2" or "3":
            dmg = random.randint(4,7)
            print("You attack the", enemy[0], "with your", abilities.get(choice),"dealing",dmg,"damage.\n")
            enemy[1] = enemy[1] - dmg
        else:
            print("Invalid input please enter a number 1-3.\n")
            continue
        print("The", enemy[0], "attacks back dealing", enemy[2],"damage to you.\n" )
        hp = hp - enemy[2]
        if hp <= 0:
            print("You fall to your knees from the fatal wound inflicted upon you.")
            print("The", enemy[0], "has slain you thus is the end of your grand adventure...")
            exit()

    print("The",enemy[0],"is slain. It's lifeless body falls to the ground, and has nothing of worth on it.\n")
    return hp



#Start of the program
try:
    fopen = open("startlore.txt",'r+')
    finfo = fopen.readlines()
except:
    print("File cannot be opened startlore can't be opened.\n Make sure all files are in the same folder.")
    exit()

for line in finfo:
    print(line)

abilities = dict()

name = input("Enter your character name.\n")

while True:
    classpick = input("Pick your class, Warrior, Rogue or Mage.\n")
    classpick = classpick.lower().rstrip()
    if classpick == 'warrior':
        abilities = {"1":"Slash", "2":"Shield Bash", "3":"Whirlwind"}
        print("Name:",name,"\nClass: Warrior\nAbilities",abilities)
        print("Warriors are a tough class with a natural prowess for defensive physical combat,")
        print("and they run head first into battle to protect their allies and take out the enemies")
        print("no matter their size!\n")
        break
    elif classpick == 'rogue':
        abilities = {"1":"Shadow Strike", "2":"Dagger Throw", "3":"Backstab"}
        print("Name:",name,"\nClass: Rogue\nAbilities",abilities)
        print("Rogues are a stealthy class that takes out their enemies in the shadows")
        print("and prefers to take a more strategic approach to combat. No matter")
        print("the size of the foe Rogues will find a way!\n")
        break
    elif classpick == 'mage':
        abilities = {"1":"Fire Bolt", "2":"Electric Shock", "3":"Wind Slash"}
        print("Name:",name,"\nClass: Mage\nAbilities",abilities)
        print("Mages are a long to medium range class that prefers to take out")
        print("enemies from afar and obliterate them with their magical prowess.")
        print("Even the mightiest of foes will be taken down to their knees by the")
        print("sheer power of their spells.\n")
        break
    else:
        print("Invalid input, please enter a class name.\n")

hp = 30
startroom(abilities, hp)
